

## 如何做限流策略，令牌桶和漏斗算法的使用场景


## 让你设计一个限流的系统怎么做？

## 让你设计一个延时任务系统怎么做？
- 说了两个方案，一个是使用 redis 的ZSET 来实现，考虑分片来抗高并发，使用 redis 的持久化来实现落地，使用 redis 的哨兵实现故障转移。 一个是使用时间轮的方法。

## Redis的并发竞争问题如何解决，了解Redis事务的CAS操作吗

## 说说你知道的几种HASH算法

## java hashmap、 为什么用红黑树、红黑树临界点为啥是8

## 一致性哈希？

## 如何控制负载均衡

## paxos算法

## TCP 粘包/拆包的原因及解决方法？
为什么会发生TCP粘包、拆包？
发生TCP粘包、拆包主要是由于下面一些原因：
- 1. 应用程序写入的数据大于套接字缓冲区大小，这将会发生拆包。
- 2. 应用程序写入数据小于套接字缓冲区大小，网卡将应用多次写入的数据发送到网络上，这将会发生粘包。
- 3. 进行MSS（最大报文长度）大小的TCP分段，当TCP报文长度-TCP头部长度>MSS的时候将发生拆包。
- 4. 接收方法不及时读取套接字缓冲区数据，这将发生粘包。 
   
粘包、拆包解决办法
TCP本身是面向流的，作为网络服务器，如何从这源源不断涌来的数据流中拆分出或者合并出有意义的信息呢？通常会有以下一些常用的方法：

1. 发送端给每个数据包添加包首部，首部中应该至少包含数据包的长度，这样接收端在接收到数据后，通过读取包首部的长度字段，便知道每一个数据包的实际长度了。
2. 发送端将每个数据包封装为固定长度（不够的可以通过补0填充），这样接收端每次从接收缓冲区中读取固定长度的数据就自然而然的把每个数据包拆分开来。
3. 可以在数据包之间设置边界，如添加特殊符号，这样，接收端通过这个边界就可以将不同的数据包拆分开。

## Redis 的 ZSET 怎么实现的？ 尽量介绍的全一点，跳跃表加哈希表以及压缩链表


## Redis 的 ZSET 做排行榜时，如果要实现分数相同时按时间顺序排序怎么实现？ 